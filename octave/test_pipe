#! /usr/bin/octave -qW
%
%	Test script to open a pipe and wait for input
%
printf ("%s\n", program_name ());
pipename = "/tmp/sonicom-octave-pipe" % the name of our pipe
if(exist(pipename,"file") != 2)
	disp(['Creating pipe ' pipename]);
	system(['mkfifo ' pipename]); % open a named pipe called 'myfifo'
end
disp(['Opening ' pipename ' pipe']);
fr=fopen(pipename,'r+'); % open for reading
fw=fopen(pipename,'w'); % open for writing
disp('Waiting for input');
%a=fscanf(fr,'%c',10); % read the first 10 characters. This will wait until 10 characters have appeared!
a=fscanf(fr,'%s',1); % read the first string.

disp(['The following text has appeared in the pipe ' pipename ': ' a]);
